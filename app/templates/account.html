{% extends "base.html" %}
{% from 'bootstrap5/form.html' import render_form %}
{% block content %}

<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
<link href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" rel="stylesheet">

<style>
    body, h1, h2, h3, h4, h5, h6, p, a, th, td, input, button, select, textarea {
        font-family: Georgia, serif; /* Apply Georgia font */
    }

    body {
        background-color: #E6E6FA; /* Lavender background for overall body, similar to the screenshot */
    }
    .dashboard-container {
        background-color: #B0C4DE; /* Light steel blue background, similar to the screenshot */
        padding: 20px;
        margin-top: 20px;
        border-radius: 0; /* Square borders like the screenshot */
        border: 2px solid #4682B4; /* Steel blue border, similar to the screenshot */
    }
    .table {
        margin-top: 20px;
        border-collapse: collapse;
    }
    .table, .table th, .table td {
        border: 1px solid #A9A9A9; /* Dark grey border for table and cells */
    }
    .table th {
        background-color: #B0C4DE; /* Light steel blue background for table header */
        color: #000; /* Black color for text */
    }
    .table-hover tbody tr:hover {
        background-color: #f8f8f8;
    }
    .btn-light, .btn-primary {
        background-color: #4682B4; /* Steel blue background for buttons */
        color: white;
        border: 1px solid #4682B4;
    }
    .btn-light:hover, .btn-primary:hover {
        background-color: #4169E1; /* Royal blue background for button hover */
        border-color: #4169E1;
    }
    .balance-display {
        font-size: 1.5em;
        margin-bottom: 20px;
    }
</style>

<div class="container dashboard-container">
    <h2>My Dashboard</h2>
    <p>Hello, {{ current_user.firstname }} {{ current_user.lastname }}!</p>
    <p>From your My Account Dashboard you have the ability to view a snapshot of your recent account activity and update your account information. Select a link below to view or edit information.</p>

    <div class="balance-display">
        <strong>Balance:</strong> ${{ current_user.balance }}
    </div>

    {{ render_form(form) }}

    <h3>Recent Purchases</h3>
    <table class='table table-hover'>
        <thead>
            <tr>
                <th>Order #</th>
                <th>Ship To</th>
                <th>Order Date</th>
                <th>Amount</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for purchase in purchase_history %}
            <tr>
                <td>{{ purchase.pid }}</td>
                <td>{{ purchase.name }}</td>
                <td>{{ humanize_time(purchase.time_purchased) }}</td>
                <td>{{ purchase.price }}</td>
                <td>{{ purchase.status }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <a href="{{ url_for('users.update') }}" type="button" class="btn btn-light">Account Settings</a>

    <div class="mt-3">
        <a href="{{ url_for('reviews.index') }}" class="btn btn-primary">Check your reviews here</a>
    </div>
</div>

{% endblock %}

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
